<div *ngIf="!config.hide" class="form-group" [formGroup]="group" style="position: relative">
  <div class="form-element">
    <label class="col-form-label form-element-label" [attr.for]="key" *ngIf="label && config.templateOptions.label">
      {{config.templateOptions.label}}:
    </label>
    <div class="form-element-content" [class.showAll]="viewMode || config.type === 'static'" [class.full]="config.templateOptions.addon || config.key === 'password'">
      <input
        *ngIf="(config.type !== 'static' || config.key === 'strength') && !viewMode && config.key !== 'street_address'"
        class="form-control"
        [class.not-empty]="group.get(key).value"
        autocomplete="off"
        #input
        (blur)="eventHandler($event)"
        (focus)="generateList()"
        (keyup)=filter(key)
        [class.addon-input]="config.templateOptions.addon || config.key === 'password'"
        [formControlName]="key"
        [attr.type]="config.templateOptions.type ? (config.templateOptions.type === 'score' && 'number') || config.templateOptions.type : 'text'"
        [attr.id]="key"
        [attr.name]="key"
        [attr.placeholder]="!config.templateOptions.label ? config.templateOptions.placeholder : ''"
        [readonly]="config.read_only"
        [value]="config.value === 0 || config.value ? config.value : group.get(key).value === 0 || group.get(key).value ? group.get(key).value : ''">

      <input type="text" class="form-control" id="autocomplete"
        *ngIf="config.type !== 'static' && !viewMode && config.key === 'street_address'"
        ng2-google-place-autocomplete
        [formControlName]="key"
        [attr.id]="key"
        [attr.name]="key"
        (setAddress) = "getAddress($event)">
      <div class="autocomplete" [hidden]="!(filteredList && filteredList.length) || hideAutocomplete">
        <div class="autocomplete-list"
          infinite-scroll
          [infiniteScrollDistance]="modalScrollDistance"
          [infiniteScrollThrottle]="modalScrollThrottle"
          [scrollWindow]="false"
          (scrolled)="onModalScrollDown()">
          <ul class="list-group w-100">
            <li class="list-group-item autocomplete-item p-1 pl-2" style="cursor: pointer"
              *ngFor="let item of list"
              (click)="select(item.name)">{{item.name}}</li>
          </ul>
        </div>
      </div>
      <div *ngIf="viewMode && config.type !== 'static' && config.templateOptions.type !== 'score'" >{{displayValue}}</div>
      <div *ngIf="config.templateOptions.addon" class="addon">
        <i *ngIf="config.templateOptions.addon.indexOf('.') === -1" fa [name]="config.templateOptions.addon"></i>
        <img *ngIf="config.templateOptions.addon.indexOf('.') > -1" [src]="config.templateOptions.addon">
      </div>

      <div *ngIf="config.key === 'password'" class="password" (click)="switchType(config.templateOptions.type)">
        <img src="/assets/img/eye.svg">
      </div>
      <div *ngIf="config.type === 'static' && config.templateOptions.type !== 'score'">{{displayValue}}</div>
      <div class="rating" *ngIf="viewMode && config.templateOptions.type === 'score'">
        <ngb-rating [rate]="config.value" max="5" [readonly]="true">
          <template let-fill="fill" let-index="index">
            <span *ngIf="fill === 100" class="star full">&#9733;</span>
            <span *ngIf="fill === 0" class="star">&#9733;</span>
            <span *ngIf="fill < 100 && fill > 0" class="star">
              <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
            </span>
          </template>
        </ngb-rating>
        <!-- &nbsp;
        | {{displayValue}} -->
      </div>
    </div>
  </div>
  <small class="text-muted" *ngIf="config.templateOptions.description">
    {{config.templateOptions.description}}
  </small>
  <div *ngIf="errors">
    <div class="text-danger mt-1" *ngIf="errors[config.key]">{{errors[config.key]}}</div>
  </div>
  <div *ngIf="message">
    <div *ngIf="message[config.key]" class="text-success mt-1">{{message[config.key]}}</div>
  </div>
</div>
