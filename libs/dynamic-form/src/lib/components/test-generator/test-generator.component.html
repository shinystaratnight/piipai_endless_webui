<section *ngIf="testData; else preloader">
  <header class="header">
    <h4 class="title">{{ testData.name }}</h4>

    <webui-stepper
      class="stepper"
      [currentStep]="currentQuestion"
      [stepCount]="testData.questions.length"
    ></webui-stepper>
  </header>

  <div *ngIf="!reload; else preloader" class="content">
    <p class="description">{{ testData.questions[currentQuestion].name }}</p>

    <p *ngIf="testData.questions[currentQuestion].details">
      {{ testData.questions[currentQuestion].details }}
    </p>

    <div class="images" *ngIf="testData.questions[currentQuestion].pictures.length">
      <img class="image" *ngFor="let image of testData.questions[currentQuestion].pictures" [src]="image" alt="" />
    </div>

    <ng-container
      appFormElement
      [config]="testData.questions[currentQuestion].answerMetadata"
      [group]="testData.questions[currentQuestion].group"
    >
    </ng-container>

    <ng-container
      *ngIf="
        testData.questions[currentQuestion].type === QuestionType.Text &&
        !skipScore
      "
      appFormElement
      [config]="testData.questions[currentQuestion].scoreMetadata"
      [group]="testData.questions[currentQuestion].group"
    >
    </ng-container>
  </div>

  <footer class="footer">
    <button
      type="button"
      class="button-secondary"
      (click)="back()"
      [disabled]="currentQuestion === 0"
    >
      Back
    </button>
    <button
      *ngIf="currentQuestion + 1 !== testData.questions.length"
      type="button"
      class="button-primary"
      (click)="next()"
    >
      Next
    </button>
    <button
      *ngIf="currentQuestion + 1 === testData.questions.length"
      type="submit"
      class="button-primary"
      (click)="sendForm()"
    >
      Submit
    </button>
  </footer>
</section>

<ng-template #preloader>
  <div class="spinner">
    <div class="double-bounce1"></div>
    <div class="double-bounce2"></div>
  </div>
</ng-template>
