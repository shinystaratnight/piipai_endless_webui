<section *ngIf="testData; else preloader">
  <header class="header">
    <h4 class="title">{{ testData.name }}</h4>
  </header>

  <div class="content">
    <webui-stepper #cdkStepper>
      <cdk-step *ngFor="let question of testData.questions">
        <p class="description">{{ question.name }}</p>

        <p *ngIf="question.details">
          {{ question.details }}
        </p>

        <div class="images" *ngIf="question.pictures.length">
          <img
            class="image"
            *ngFor="let image of question.pictures"
            [src]="image"
            alt=""
          />
        </div>

        <form
          class="form"
          [formGroup]="question.group"
          [ngSwitch]="question.type"
        >
          <webui-form-radio-switch
            *ngSwitchCase="QuestionType.Options"
            formControlName="answer"
            [options]="question.answerMetadata.options"
          ></webui-form-radio-switch>
        </form>

        <!-- <ng-container
          appFormElement
          [config]="question.answerMetadata"
          [group]="question.group"
        >
        </ng-container>

        <ng-container
          *ngIf="question.type === QuestionType.Text && !skipScore"
          appFormElement
          [config]="question.scoreMetadata"
          [group]="question.group"
        >
        </ng-container> -->

        <footer class="footer">
          <button
            type="button"
            class="button-secondary"
            (click)="stepper.previous()"
          >
            Back
          </button>
          <button
            type="button"
            class="button-primary"
            [disabled]="question.group.invalid"
            (click)="stepper.next()"
          >
            Next
          </button>

          <!-- <button
            *ngIf="currentQuestion + 1 === testData.questions.length"
            type="submit"
            class="button-primary"
            (click)="sendForm()"
          >
            Submit
          </button> -->
        </footer>
      </cdk-step>
    </webui-stepper>
  </div>
</section>

<ng-template #preloader>
  <div class="spinner">
    <div class="double-bounce1"></div>
    <div class="double-bounce2"></div>
  </div>
</ng-template>
