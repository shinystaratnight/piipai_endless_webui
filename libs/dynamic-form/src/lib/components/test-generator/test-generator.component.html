<ng-container *ngIf="testData">
  <div class="test__header">
    <p class="test__description" *ngIf="testData.description">
      {{ testData.description }}
    </p>

    <h4 class="test__name">{{ testData.name }}</h4>
  </div>

  <div class="test__body">
    <webui-stepper
      [currentStep]="currentQuestion"
      [stepCount]="testData.questions.length"
    ></webui-stepper>

    <ng-container *ngIf="!reload">
      <p class="test__question">
        {{ testData.questions[currentQuestion].name }}
      </p>
      <p
        class="test__question-details"
        *ngIf="testData.questions[currentQuestion].details"
      >
        {{ testData.questions[currentQuestion].details }}
      </p>

      <div>
        <div
          *ngIf="testData.questions[currentQuestion].pictures.length"
          class="images"
        >
          <img
            class="image"
            *ngFor="let image of testData.questions[currentQuestion].pictures"
            [src]="image"
            alt=""
          />
        </div>

        <ng-container
          appFormElement
          [config]="testData.questions[currentQuestion].answerMetadata"
          [group]="testData.questions[currentQuestion].group"
        >
        </ng-container>

        <ng-container
          *ngIf="
            testData.questions[currentQuestion].type === QuestionType.Text &&
            !skipScore
          "
          appFormElement
          [config]="testData.questions[currentQuestion].scoreMetadata"
          [group]="testData.questions[currentQuestion].group"
        >
        </ng-container>
      </div>
    </ng-container>

    <div *ngIf="reload" class="spinner">
      <div class="double-bounce1"></div>
      <div class="double-bounce2"></div>
    </div>
  </div>

  <div class="test__footer d-flex justify-content-between">
    <button
      type="button"
      class="test__button btn btn-default"
      (click)="back()"
      [disabled]="currentQuestion === 0"
    >
      Back
    </button>
    <button
      *ngIf="currentQuestion + 1 !== testData.questions.length"
      type="button"
      class="test__button btn btn-primary"
      (click)="next()"
    >
      Next
    </button>
    <button
      *ngIf="currentQuestion + 1 === testData.questions.length"
      type="submit"
      class="test__button btn btn-success"
      (click)="sendForm()"
    >
      Submit
    </button>
  </div>
</ng-container>

<div *ngIf="!testData" class="spinner">
  <div class="double-bounce1"></div>
  <div class="double-bounce2"></div>
</div>
