<div class="list-info-wrapper">
  <div class=list-info-left>
    <div class="list-info-image">
      <img *ngIf="picture" [src]="picture">
      <div *ngIf="contactAvatar" class="contact-avatar">
        {{contactAvatar}}
      </div>

      <ng-container *ngIf="available != undefined">
        <span *ngIf="available && (picture || contactAvatar)" class="available">
          <svg width="9" height="7" viewBox="0 0 9 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.08284 4.87574C2.92663 5.03195 2.67337 5.03195 2.51716 4.87574L1.12071 3.47929C0.888359 3.24694 0.511641 3.24694 0.279289 3.47929C0.0469372 3.71164 0.0469373 4.08836 0.279289 4.32071L2.37574 6.41716C2.61005 6.65147 2.98995 6.65147 3.22426 6.41716L8.52071 1.12071C8.75306 0.888359 8.75306 0.511642 8.52071 0.279289C8.28836 0.0469374 7.91164 0.0469372 7.67929 0.279289L3.08284 4.87574Z" fill="white" stroke="#FDFDFD" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <fa-icon *ngIf="!available && (picture || contactAvatar)" [icon]="['fas', 'times']" class="unavailable"></fa-icon>
      </ng-container>
    </div>

    <a *ngIf="!config.editDisable" class="list-info-edit-link not-underline" [class.pl-2]="!(picture || contactAvatar)" [routerLink]="[config.rowId + '/change']">
      <fa-icon [icon]="['fas', 'list']" class="edit"></fa-icon>
      Profile
    </a>
  </div>

  <div class="list-info-block">
    <span *ngIf="job_title">{{job_title}}</span>
    <h5 class="list-info-title" [class.position]="position">
      <span class="title" *ngIf="!getScore(averageScore) && !config.hideTitle">
        {{title}}
        <app-info *ngIf="description" class="ml-1" [description]="description"></app-info>
      </span>

      <span style="font-size: 14px" *ngIf="config.hideTitle">Average score</span>
      <span class="title" *ngIf="getScore(averageScore)">
        <ng-container *ngIf="!config.hideTitle">{{title}}</ng-container>
        <span class="score"
          placement="right-top"
          [ngbTooltip]="avarage"
          [style.color]="colors[getScore(averageScore)]"
          [style.borderColor]="colors[getScore(averageScore)]">
            {{averageScore | number:'1.1-1'}}&nbsp;
            <fa-icon icon="star"></fa-icon>
        </span>
      </span>
      <span class="score text-danger"
        *ngIf="!getScore(averageScore) && isCandidatePage()"
        [style.borderColor]="colors[1]">
          No rating
      </span>
    </h5>
    <p *ngIf="position" class="position">{{position}}</p>
    <p class="description" *ngIf="company">{{company}}</p>
    <p class="description">{{address}}</p>

    <div *ngIf="status && status.length" class="list-info-status">
      <span class="title">Status:</span>
      <div class="list-info-status-wrapper">
        <span class="badge badge-outline" [ngClass]="[checkClass(stat)]" *ngFor="let stat of statusList">{{stat.__str__}}</span>
        <a class="more" href *ngIf="more" (click)="showMore($event)">{{status.length - 4}} more</a>
      </div>
    </div>
  </div>
</div>

<ng-template #avarage>
  <div *ngIf="config.value" class="info-block p-1">
    <ng-container *ngIf="averageScoreDescription.includes.length">
      <h6 class="info-block__title">Average includes</h6>
      <ul class="info-block__list">
        <li class="info-block__item" *ngFor="let scoreItem of averageScoreDescription.includes">
          <ng-container *ngTemplateOutlet="score; context: {name: scoreItem.label, score: scoreItem.score}"></ng-container>
        </li>
      </ul>
    </ng-container>

    <ng-container *ngIf="averageScoreDescription.excludes.length">
      <h6 class="info-block__title">Excludes</h6>
      <ul class="info-block__list">
        <li class="info-block__item" *ngFor="let scoreItem of averageScoreDescription.excludes">
          <ng-container *ngTemplateOutlet="score; context: {name: scoreItem.label, score: scoreItem.score}"></ng-container>
        </li>
      </ul>
    </ng-container>
  </div>
</ng-template>

<ng-template #score let-name="name" let-score="score">
  <fa-icon class="info-block__icon text-warning" icon="circle"></fa-icon>
  {{name}}
  <ng-container *ngIf="getScore(score)">
    <span class="info-block__score" [style.color]="colors[getScore(score)]" [style.borderColor]="colors[getScore(score)]">
      {{score | number:'1.1-1'}}
      <fa-icon icon="star"></fa-icon>
    </span>
  </ng-container>
  <span *ngIf="!getScore(score)" class="info-block__score text-danger">No rating</span>
</ng-template>
