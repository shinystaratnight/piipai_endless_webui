<app-dynamic-form [config]="details"></app-dynamic-form>

<div class="buttons" *ngIf="!isEditTimesheet">
  <button *ngFor="let typeItem of types" class="btn btn-primary" [class.active]="type === typeItem.key" type="button"
    (click)="setTimesheetType(typeItem.key)">
    {{ typeItem.translateKey | translate: { Default: typeItem.label } }}
  </button>
</div>

<app-dynamic-form *ngIf="type === timesheetType.Times && !formFilled" [config]="times" [hiddenFields]="hiddenFields"
  (submitForm)="saveTimes($event)">
  <div class="footer">
    <div *ngIf="errors" class="text-danger mb-2">
      {{ errors.non_field_errors }}
    </div>
    <button class="btn btn-primary" type="submit">
      Save
      <app-spinner *ngIf="saveProcess"></app-spinner>
    </button>
  </div>
</app-dynamic-form>

<app-dynamic-form *ngIf="type === timesheetType.Times && formFilled" [config]="timesFilled"
  [hiddenFields]="hiddenFields" (submitForm)="saveTimes($event)">
</app-dynamic-form>

<app-dynamic-form *ngIf="type === timesheetType.Activity" [config]="skillActivity" [hiddenFields]="hiddenFields"
  (event)="eventHandler($event)" (submitForm)="saveSkillActivity($event)">
  <div *ngIf="!formFilled" class="footer">
    <div *ngIf="errors" class="text-danger mb-2">
      {{ errors.non_field_errors }}
    </div>
    <button class="btn btn-primary" type="submit">
      Save
      <app-spinner *ngIf="saveProcess"></app-spinner>
    </button>
  </div>
</app-dynamic-form>

<app-dynamic-form *ngIf="type === timesheetType.Activities && isEditTimesheet" [config]="skillActivities">
</app-dynamic-form>

<ng-container *ngIf="type === timesheetType.Activities && !isEditTimesheet">
  <table class="table">
    <tr>
      <th>Skill Activity</th>
      <th>Value</th>
    </tr>

    <tr>
      <td>{{ eventData.worktype.__str__ }}</td>
      <td>
        {{ eventData.value.value }}
        <small class="description">{{
          eventData.worktype.uom.short_name
          }}</small>
      </td>
    </tr>
  </table>
</ng-container>

<app-dynamic-form *ngIf="formFilled" [config]="notes"></app-dynamic-form>

<div class="footer" *ngIf="formFilled">
  <button class="btn btn-primary" type="button" (click)="saveTimesheet()">
    Save
    <app-spinner *ngIf="saveProcess"></app-spinner>
  </button>
</div>
