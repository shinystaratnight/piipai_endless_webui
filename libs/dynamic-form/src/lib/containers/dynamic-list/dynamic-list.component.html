<div
  #datatable
  [class.mobile]="identifyDevice()"
  [class.on-list]="!inForm"
  class="mw-100 datatable"
>
  <!-- <div appMove [parent]="datatable" *ngIf="poped" class="card-header bg-primary text-white" (active)="activeTable($event)">
    <h5 class="d-flex justify-content-between align-items-center mb-0 lead" *ngIf="config.list">
      <span [ngClass]="{'mr-5': poped}">{{config.list.label}}</span>
      <div class="d-flex fustify-content-center align-items-center">
        <fa-icon
          class="ml-2 icon"
          [icon]="['fas', 'window-minimize']"
          (click)="minimizeTable()"
          aria-hidden="true">
        </fa-icon>
        <fa-icon
          class="ml-2 icon"
          [icon]="['fas', 'window-maximize']"
          (click)="unpopedTable()"
          aria-hidden="true">
        </fa-icon>
        <fa-icon
          class="ml-2 icon"
          [icon]="['fas', 'times']"
          (click)="closeTable()"
          aria-hidden="true">
        </fa-icon>
      </div>
    </h5>
  </div> -->
  <div
    class="datatable-content"
    [ngClass]="{
      open: !filtersHidden,
      'in-form': inForm,
      'inline-filters': inlineFilters
    }"
  >
    <div
      appScroll
      [enable]="!inForm"
      class="filter-wrapper"
      *ngIf="(first || poped) && showFilters && !inlineFilters"
      [class.open]="!filtersHidden"
      [class.in-form]="inForm"
    >
      <app-filter-block
        [key]="config.list.list"
        [config]="filtersOfList"
        (event)="filterHandler($event)"
      ></app-filter-block>
    </div>
    <div class="background" (click)="toggleFilterBlock()"></div>
    <div
      class="datatable-body"
      [ngClass]="{
        'card-block': poped,
        'in-form': inForm,
        'open-filters': !filtersHidden && showFilters,
        'inline-filters': inlineFilters
      }"
      [class.mobile-device]="identifyDevice()"
    >
      <ng-content></ng-content>

      <h2
        class="datatable-label mb-0"
        [class.has-description]="description"
        *ngIf="
          (config.list &&
            (inForm &&
              (config.list.search_enabled ||
                (config.list.buttons && config.list.buttons.length)) &&
              !delay)) ||
          (!inForm && !poped)
        "
      >
        <span *ngIf="!inForm && !description" class="mr-auto my-1">{{
          label || config.list.label
        }}</span>
        <p *ngIf="description">
          <span>{{ label || config.list.label }}</span> <br />
          <span class="description">{{ description }}</span>
        </p>
        <app-list-buttons
          [buttons]="config.list.buttons"
          [first]="first"
          [inForm]="inForm"
          [label]="config.list.label"
          [poped]="poped"
          [allowPermissions]="allowPermissions"
          (event)="buttonAction($event)"
        >
        </app-list-buttons>
      </h2>
      <div
        appScroll
        [enable]="!inForm"
        *ngIf="
          (showFilters && !(identifyDevice() || isMobileDevice)) ||
          config.list.search_enabled
        "
        class="datatable-header"
        [class.open-filters]="!filtersHidden && showFilters"
        [class.in-form]="inForm"
      >
        <button
          [class.active]="!filtersHidden"
          class="btn filter-button mb-1 mb-sm-0"
          (click)="toggleFilterBlock()"
          *ngIf="showFilters && !(identifyDevice() || isMobileDevice)"
        >
          <svg
            width="20"
            height="15"
            viewBox="0 0 20 15"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M 5.58236 3.51318C 4.87141 3.51318 4.29285 2.93807 4.29285 2.23032C 4.29285 1.52304 4.87141 0.94746 5.58236 0.94746C 6.29331 0.94746 6.87189 1.52304 6.87189 2.23032C 6.87189 2.93807 6.29331 3.51318 5.58236 3.51318ZM 19.0476 1.77933L 8.09522 1.77933C 7.9776 1.77933 7.87332 1.82623 7.78998 1.89682C 7.62665 0.826186 6.70379 1.30114e-07 5.58236 1.30114e-07C 4.49808 1.30114e-07 3.59142 0.770285 3.38523 1.78975C 3.36761 1.78786 3.35189 1.77933 3.33332 1.77933L 0.476187 1.77933C 0.21333 1.77933 -2.46465e-06 1.99156 -2.46465e-06 2.25306C -2.46465e-06 2.51456 0.21333 2.72679 0.476187 2.72679L 3.33332 2.72679C 3.35618 2.72679 3.37523 2.71684 3.39713 2.714C 3.61999 3.7112 4.51332 4.46064 5.58236 4.46064C 6.68903 4.46064 7.60522 3.65672 7.7857 2.60599C 7.86951 2.67894 7.97569 2.72679 8.09522 2.72679L 19.5238 2.72679C 19.7871 2.72679 20 2.51456 20 2.25306C 20 1.99156 19.7871 1.77933 19.5238 1.77933L 19.0476 1.77933ZM 19.5238 7.46419L 16.8252 7.46419C 16.7067 6.34381 15.7633 5.46505 14.6067 5.46505C 13.45 5.46505 12.5067 6.34381 12.3886 7.46419L 0.476231 7.46419C 0.213374 7.46419 4.11318e-05 7.67594 4.11318e-05 7.93792C 4.11318e-05 8.19941 0.213374 8.41164 0.476231 8.41164L 12.4943 8.41164C 12.7957 9.28899 13.6238 9.92569 14.6067 9.92569C 15.5895 9.92569 16.4176 9.28899 16.7195 8.41164L 19.5238 8.41164C 19.7867 8.41164 20 8.19941 20 7.93792C 20 7.67594 19.7867 7.46419 19.5238 7.46419ZM 14.6067 8.97823C 13.8957 8.97823 13.3172 8.40264 13.3172 7.69536C 13.3172 6.98809 13.8957 6.41251 14.6067 6.41251C 15.3176 6.41251 15.8962 6.98809 15.8962 7.69536C 15.8962 8.40264 15.3176 8.97823 14.6067 8.97823ZM 20 12.6749C 20 12.4134 19.7871 12.2012 19.5238 12.2012L 8.09522 12.2012C 7.97284 12.2012 7.86331 12.2505 7.77903 12.3263C 7.57141 11.3082 6.66569 10.5394 5.58236 10.5394C 4.53855 10.5394 3.66666 11.2561 3.41809 12.2183C 3.38952 12.213 3.36332 12.2012 3.33332 12.2012L 0.476187 12.2012C 0.21333 12.2012 -2.46465e-06 12.4134 -2.46465e-06 12.6749C -2.46465e-06 12.9369 0.21333 13.1487 0.476187 13.1487L 3.33332 13.1487C 3.34951 13.1487 3.36284 13.1416 3.37808 13.1397C 3.55665 14.1932 4.47332 15 5.58236 15C 6.72712 15 7.66283 14.1392 7.79712 13.0359C 7.87902 13.1032 7.98045 13.1487 8.09522 13.1487L 19.5238 13.1487C 19.7871 13.1487 20 12.9369 20 12.6749ZM 5.58236 14.0525C 4.87141 14.0525 4.29285 13.4774 4.29285 12.7697C 4.29285 12.0624 4.87141 11.4868 5.58236 11.4868C 6.29331 11.4868 6.87189 12.0624 6.87189 12.7697C 6.87189 13.4774 6.29331 14.0525 5.58236 14.0525Z"
              fill="#FDFDFD"
            />
          </svg>
          Filters
        </button>
        <app-list-search-bar
          class="datatable-search"
          *ngIf="data && config.list.search_enabled"
          [param]="config.list.searchParameter"
          [count]="data.count"
          [label]="config.list.pagination_label || config.list.label"
          [list]="config.list.list"
          (event)="filterHandler($event)"
        >
        </app-list-search-bar>
      </div>

      <div
        class="filter-wrapper inline"
        *ngIf="(first || poped) && showFilters && inlineFilters"
        appScroll
        [enable]="!inForm"
        [ngClass]="{ open: !filtersHidden, 'in-form': inForm }"
      >
        <app-filter-block
          [key]="config.list.list"
          [inline]="true"
          [config]="filtersOfList"
          (event)="filterHandler($event)"
        ></app-filter-block>
      </div>

      <div class="background" (click)="toggleFilterBlock()"></div>

      <app-action-element
        *ngIf="config.list.actions && !inForm"
        [actionProcess]="actionProcess"
        [count]="selectedCount"
        [config]="config.list.actions"
        (event)="actionHandler($event)"
      >
      </app-action-element>

      <div
        class="d-flex align-items-center justify-content-between"
        *ngIf="identifyDevice() || isMobileDevice"
      >
        <button
          class="btn btn-link text-secondary d-flex align-items-center text-uppercase fw-600 mb-0"
          (click)="toggleFilterBlock()"
          *ngIf="showFilters"
          style="font-size: 14px"
        >
          <svg
            class="mr-1"
            width="16"
            height="12"
            viewBox="0 0 20 15"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M 5.58236 3.51318C 4.87141 3.51318 4.29285 2.93807 4.29285 2.23032C 4.29285 1.52304 4.87141 0.94746 5.58236 0.94746C 6.29331 0.94746 6.87189 1.52304 6.87189 2.23032C 6.87189 2.93807 6.29331 3.51318 5.58236 3.51318ZM 19.0476 1.77933L 8.09522 1.77933C 7.9776 1.77933 7.87332 1.82623 7.78998 1.89682C 7.62665 0.826186 6.70379 1.30114e-07 5.58236 1.30114e-07C 4.49808 1.30114e-07 3.59142 0.770285 3.38523 1.78975C 3.36761 1.78786 3.35189 1.77933 3.33332 1.77933L 0.476187 1.77933C 0.21333 1.77933 -2.46465e-06 1.99156 -2.46465e-06 2.25306C -2.46465e-06 2.51456 0.21333 2.72679 0.476187 2.72679L 3.33332 2.72679C 3.35618 2.72679 3.37523 2.71684 3.39713 2.714C 3.61999 3.7112 4.51332 4.46064 5.58236 4.46064C 6.68903 4.46064 7.60522 3.65672 7.7857 2.60599C 7.86951 2.67894 7.97569 2.72679 8.09522 2.72679L 19.5238 2.72679C 19.7871 2.72679 20 2.51456 20 2.25306C 20 1.99156 19.7871 1.77933 19.5238 1.77933L 19.0476 1.77933ZM 19.5238 7.46419L 16.8252 7.46419C 16.7067 6.34381 15.7633 5.46505 14.6067 5.46505C 13.45 5.46505 12.5067 6.34381 12.3886 7.46419L 0.476231 7.46419C 0.213374 7.46419 4.11318e-05 7.67594 4.11318e-05 7.93792C 4.11318e-05 8.19941 0.213374 8.41164 0.476231 8.41164L 12.4943 8.41164C 12.7957 9.28899 13.6238 9.92569 14.6067 9.92569C 15.5895 9.92569 16.4176 9.28899 16.7195 8.41164L 19.5238 8.41164C 19.7867 8.41164 20 8.19941 20 7.93792C 20 7.67594 19.7867 7.46419 19.5238 7.46419ZM 14.6067 8.97823C 13.8957 8.97823 13.3172 8.40264 13.3172 7.69536C 13.3172 6.98809 13.8957 6.41251 14.6067 6.41251C 15.3176 6.41251 15.8962 6.98809 15.8962 7.69536C 15.8962 8.40264 15.3176 8.97823 14.6067 8.97823ZM 20 12.6749C 20 12.4134 19.7871 12.2012 19.5238 12.2012L 8.09522 12.2012C 7.97284 12.2012 7.86331 12.2505 7.77903 12.3263C 7.57141 11.3082 6.66569 10.5394 5.58236 10.5394C 4.53855 10.5394 3.66666 11.2561 3.41809 12.2183C 3.38952 12.213 3.36332 12.2012 3.33332 12.2012L 0.476187 12.2012C 0.21333 12.2012 -2.46465e-06 12.4134 -2.46465e-06 12.6749C -2.46465e-06 12.9369 0.21333 13.1487 0.476187 13.1487L 3.33332 13.1487C 3.34951 13.1487 3.36284 13.1416 3.37808 13.1397C 3.55665 14.1932 4.47332 15 5.58236 15C 6.72712 15 7.66283 14.1392 7.79712 13.0359C 7.87902 13.1032 7.98045 13.1487 8.09522 13.1487L 19.5238 13.1487C 19.7871 13.1487 20 12.9369 20 12.6749ZM 5.58236 14.0525C 4.87141 14.0525 4.29285 13.4774 4.29285 12.7697C 4.29285 12.0624 4.87141 11.4868 5.58236 11.4868C 6.29331 11.4868 6.87189 12.0624 6.87189 12.7697C 6.87189 13.4774 6.29331 14.0525 5.58236 14.0525Z"
            />
          </svg>
          Filter
        </button>

        <!-- TODO: fix dropdown -->
        <!-- <div ngbDropdown placement="bottom-right" class="sort-dropdown text-right">
          <label ngbDropdownToggle class="mb-0">
            Sort by
          </label>
          <fa-icon class="sort-icon"
            icon="chevron-down">
          </fa-icon>
          <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
            <div *ngFor="let field of config.list.columns">
              <span ngbDropdownItem
                class="dropdown-item"
                [class.activated]="field.sorted"
                *ngIf="field.sort"
                (click)="sorting(field, field.sorted === 'desc' ? 'asc' : 'desc', $event)">
                  {{field.label}}
                  <fa-icon class="sort-icon"
                    [icon]="['fas', field.sorted === 'asc' ? 'chevron-up' : 'chevron-down']">
                  </fa-icon>
              </span>
            </div>
          </div>
        </div> -->
      </div>

      <ng-container *ngIf="identifyDevice()">
        <div class="mobile-item" *ngFor="let row of body">
          <ng-container
            *ngTemplateOutlet="
              getView();
              context: { data: row, status: getElement('status', row.content) }
            "
          ></ng-container>
        </div>
      </ng-container>

      <div #tableWrapper [hidden]="identifyDevice()" class="table-wrapper">
        <table class="table table-sm" *ngIf="config.list">
          <thead class="thead-default">
            <tr>
              <th
                *ngIf="
                  (!inForm && config.list.actions) ||
                  actions ||
                  (!noneEdit && !inForm)
                "
                class="active first-cell"
                style="width: 2rem"
              >
                <div *ngIf="(!inForm && config.list.actions) || actions">
                  <label for="all-checkbox">{{'all' | translate}}</label>
                  <input
                    id="all-checkbox"
                    type="checkbox"
                    hidden
                    *ngIf="config.list.actions || actions"
                    [(ngModel)]="selectedAll"
                    (ngModelChange)="selectAll()"
                  />
                </div>
              </th>
              <ng-container *ngFor="let field of config.list.columns">
                <ng-container *ngIf="!field.hide">
                  <th
                    [class.text-center]="field.center"
                    *ngIf="!(field.tab && field.tab.is_collapsed)"
                  >
                    <div class="d-inline" [class.sort]="field.sort">
                      <ng-container
                        appListElement
                        [head]="true"
                        [config]="field"
                        (event)="sortingBy(field)"
                      >
                      </ng-container>
                    </div>

                    <app-sort-icon
                      class="ml-2"
                      [exist]="field.sort"
                      [sort]="field.sorted"
                    ></app-sort-icon>
                    <!-- (click)="field.openSort = !field.openSort"></i> -->
                    <!-- <ul *ngIf="field.sort && !delay && field.openSort" class="sort-parameters">
                      <li [class.active]="field.sorted === 'asc'" (click)="sorting(field, 'asc'); field.openSort = false">Alphabetically A-Z</li>
                      <li [class.active]="field.sorted === 'desc'" (click)="sorting(field, 'desc'); field.openSort = false">Alphabetically Z-A</li>
                    </ul> -->
                  </th>
                </ng-container>
              </ng-container>
              <th *ngIf="config.list.tabs" class="last-cell">
                <span (click)="openAllTabs()" class="more__header">
                  {{'more' | translate}}
                  <fa-icon
                    class="ml-2 sort-icon"
                    [icon]="['fas', collapsed ? 'chevron-down' : 'chevron-up']"
                  ></fa-icon>
                </span>
              </th>
            </tr>
          </thead>
          <tbody *ngIf="body && !refresh">
            <ng-container *ngFor="let row of body">
              <tr
                *ngIf="!row.hide"
                [class.main]="row.additionalBody && !row.collapsed"
                [class.table-warning]="row.highlight && row.highlight.highlight"
                [ngStyle]="
                  row.highlight &&
                  row.highlight.color && {
                    'background-color': row.highlight.color
                  }
                "
                (click)="openDetails(row, $event)"
              >
                <td
                  *ngIf="
                    (!inForm && config.list.actions) ||
                    actions ||
                    (!noneEdit && !inForm)
                  "
                  class="first-cell"
                >
                  <label *ngIf="config.list.actions || actions">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      [checked]="select[row.id]"
                      hidden
                    />
                    <app-checkbox
                      [checked]="select[row.id]"
                      (click)="toggleCheckbox($event, row)"
                    ></app-checkbox>
                  </label>
                  <!-- <a class="first-cell-link not-underline" *ngIf="first && !config.list.editEndpoint && !inForm && !config.list.editDisable && checkPermission('get') && !noneEdit" [routerLink]="[row.id + '/change']">
                      <fa-icon
                        icon="pencil-alt"
                        class="icon">
                      </fa-icon>&nbsp;Edit
                    </a> -->
                  <fa-icon
                    *ngIf="
                      !first &&
                      !config.list.editEndpoint &&
                      !config.list.editDisable &&
                      checkPermission('get')
                    "
                    icon="pencil-alt"
                    class="icon"
                    (click)="editObject(row.id, row.__str__)"
                  >
                  </fa-icon>
                  <!-- <span class="first-cell-link hov-opacity" *ngIf="config.list.editEndpoint && canEdit(row) && !config.list.editDisable && checkPermission('get')" (click)="editListObject(row)">
                      <fa-icon icon="pencil-alt" class="icon"></fa-icon>&nbsp;Edit
                    </span> -->
                </td>

                <ng-container
                  *ngFor="let cell of row.content; let first = first"
                >
                  <td
                    *ngIf="!cell.hide"
                    [class.text-center]="cell.center"
                    [ngStyle]="{ 'width.px': cell.width }"
                    [attr.data-label]="cell.label"
                    [hidden]="cell.tab && cell.tab.is_collapsed"
                  >
                    <label class="cell-label" *ngIf="isMobileDevice">{{
                      cell.label
                    }}</label>
                    <br *ngIf="isMobileDevice" />

                    <ng-container
                      *ngIf="cell.name !== 'actions'"
                      appListElement
                      [config]="cell.content"
                      (event)="eventHandler($event)"
                      (buttonAction)="buttonHandler($event)"
                    >
                    </ng-container>

                    <ng-container *ngIf="cell.name === 'actions'">
                      <ng-template #actionsTemplate>
                        <ng-container
                          appListElement
                          [config]="cell.content"
                          (event)="eventHandler($event)"
                          (buttonAction)="
                            buttonHandler($event, (cell.pop = pop))
                          "
                        >
                        </ng-container>
                      </ng-template>
                      <fa-icon
                        class="icon-actions px-3 py-1 ml-2"
                        icon="ellipsis-v"
                        placement="bottom"
                        #pop="ngbPopover"
                        triggers="manual"
                        (click)="toggleActions($event, pop)"
                        [ngbPopover]="actionsTemplate"
                      >
                      </fa-icon>
                    </ng-container>

                    <div
                      *ngIf="
                        innerTables &&
                        innerTables[row.id] &&
                        innerTables[row.id][cell.name]
                      "
                    >
                      <app-list-table
                        *ngIf="innerTables[row.id][cell.name].body"
                        [config]="innerTables[row.id][cell.name]"
                      ></app-list-table>
                    </div>

                    <!-- <ng-container *ngIf="first && config.list.innerEdit">
                          <br>
                          <a class="first-cell-link not-underline"
                            [routerLink]="[row.id + '/change']">
                              <fa-icon
                                [icon]="['fas', 'pencil-alt']"
                                class="icon">
                              </fa-icon>
                              &nbsp;Edit
                          </a>
                        </ng-container> -->
                  </td>
                </ng-container>

                <td *ngIf="config.list.tabs" class="last-cell">
                  <button
                    type="button"
                    class="btn"
                    (click)="toggleTab($event, row)"
                  >
                    <fa-icon
                      class="more__icon mr-0"
                      [icon]="row.collapsed ? 'chevron-down' : 'chevron-up'"
                    >
                    </fa-icon>
                  </button>
                </td>
              </tr>
              <tr *ngIf="row.additionalBody && !row.collapsed">
                <td
                  *ngIf="
                    (!inForm && config.list.actions) || actions || !noneEdit
                  "
                >
                  &nbsp;
                </td>
                <td [attr.colspan]="row.content.length">
                  <table
                    *ngIf="!row.additionalBody.inline"
                    class="inner-table table table-sm"
                  >
                    <thead>
                      <tr>
                        <th *ngFor="let acell of row.additionalBody.content">
                          <span>{{ acell.label }}</span>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td
                          *ngFor="let acell of row.additionalBody.content"
                          [ngStyle]="{ 'width.px': acell.width }"
                        >
                          <div
                            class="additional-data"
                            *ngFor="let field of acell.content"
                          >
                            <span
                              *ngIf="
                                field.content &&
                                acell.content.length > 1 &&
                                !acell.hideLabel
                              "
                              class="description"
                              >{{ field.label }}</span
                            >
                            <span class="additional-data-content">
                              <ng-container
                                *ngFor="let innerField of field.content"
                                appListElement
                                [config]="innerField"
                                (event)="eventHandler($event)"
                                (buttonAction)="buttonHandler($event)"
                              >
                              </ng-container>
                            </span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <ng-container *ngIf="row.additionalBody.inline">
                    <div
                      class="additional-data-wrapper"
                      *ngFor="let acell of row.additionalBody.content"
                    >
                      <span class="additional-data-label">{{
                        acell.label
                      }}</span>
                      <div
                        class="additional-data inline"
                        *ngFor="let field of acell.content"
                      >
                        <span class="additional-data-content">
                          <ng-container
                            *ngFor="let innerField of field.content"
                            appListElement
                            [config]="innerField"
                            (event)="eventHandler($event)"
                            (buttonAction)="buttonHandler($event)"
                          >
                          </ng-container>
                        </span>
                      </div>
                    </div>
                  </ng-container>
                </td>
                <td *ngIf="config.list.tabs">&nbsp;</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>

      <ng-content select="div.list-actions"></ng-content>

      <div
        *ngIf="pageSize && inForm"
        class="d-flex flex-wrap align-items-center py-3"
      >
        <ngb-pagination
          [collectionSize]="pageSize"
          [(page)]="page"
          [maxSize]="2"
          [rotate]="true"
          [ellipses]="true"
          [boundaryLinks]="true"
          size="sm"
          (pageChange)="pageChange()"
        >
        </ngb-pagination>
        <div class="ml-2">
          {{ data.count }}
          {{ config.list.pagination_label || config.list.label }}
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #modal let-modal>
  <div class="modal-content-wrapper">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <h5 class="modal-title">{{ modalInfo.label }}</h5>
        &nbsp;
        <app-close-button
          class="close-button ml-auto align-self-center"
          (click)="modal.dismiss()"
        ></app-close-button>
      </div>
    </div>
    <div class="modal-body" [ngSwitch]="modalInfo.type">
      <app-generic-form
        *ngSwitchCase="'form'"
        [endpoint]="modalInfo.endpoint"
        [metadataQuery]="
          !modalInfo.dontUseMetadataQuery
            ? addMetadataQuery || metadataQuery
            : ''
        "
        [data]="modalInfo.data"
        [id]="modalInfo.id"
        [mode]="modalInfo.mode"
        [data]="modalInfo.data"
        [edit]="modalInfo.edit"
        (event)="formEvent($event, modal.close)"
        (errorForm)="formError($event)"
      >
        <button
          type="submit"
          class="btn btn-shadow btn-primary text-white button-save mt-3"
          [disabled]="saveProcess || modalInfo.form.disableSaveButton"
        >
          Save
          <app-spinner *ngIf="saveProcess"></app-spinner>
        </button>
      </app-generic-form>
      <agm-map
        *ngSwitchCase="'map'"
        [latitude]="modalInfo.latitude"
        [longitude]="modalInfo.longitude"
        [zoom]="13"
        [mapTypeControl]="true"
      >
        <agm-marker
          [latitude]="modalInfo.latitude"
          [longitude]="modalInfo.longitude"
        ></agm-marker>
      </agm-map>
    </div>
  </div>
</ng-template>

<ng-template #messageDetail let-modal>
  <div class="message-detail-header">
    <h5 class="message-label">{{ modalInfo.label }}</h5>
    <app-close-button
      class="close-button ml-auto"
      (click)="modal.dismiss()"
    ></app-close-button>
  </div>

  <app-generic-form
    [endpoint]="modalInfo.endpoint"
    [metadataQuery]="modalInfo.metadataQuery"
    [id]="modalInfo.id"
    [mode]="modalInfo.mode"
    [data]="modalInfo.data"
    [edit]="modalInfo.edit"
    (event)="formEvent($event, modal.close)"
    (errorForm)="formError($event)"
  >
  </app-generic-form>
</ng-template>

<ng-template #confirmModal let-modal>
  <div class="modal-header">
    <p>{{ modalInfo.message }}</p>
    <app-close-button
      class="close-button ml-auto"
      (click)="modal.close()"
    ></app-close-button>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="callAction(modalInfo, modal.close)"
    >
      {{ modalInfo.agree_label }}
    </button>
    <button
      type="button"
      class="btn btn-secondary"
      (click)="modal.close(false)"
    >
      {{ modalInfo.decline_label }}
    </button>
  </div>
</ng-template>

<ng-template #evaluateModal let-modal>
  <div class="modal-content-wrapper">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <h5 class="modal-title" [class.text-center]="modalInfo.signature">
          <ng-container *ngIf="modalInfo.evaluate">Evaluate</ng-container>

          <ng-container *ngIf="!modalInfo.evaluate">
            <ng-container *ngIf="modalInfo.label.picture">
              <img
                class="mr-2"
                alt="Photo"
                style="border-radius: 50%"
                width="40"
                height="40"
                [src]="modalInfo.label.picture"
              />
            </ng-container>

            <ng-container *ngIf="!modalInfo.label.picture">
              <span class="mr-2 contact-avatar avatar">{{
                modalInfo.label.contactAvatar
              }}</span>
            </ng-container>

            {{ modalInfo.label.name }}
          </ng-container>
        </h5>

        <app-close-button
          class="close-button ml-auto"
          (click)="modal.dismiss()"
        ></app-close-button>
      </div>
    </div>
    <div *ngIf="!modalInfo.evaluate" class="modal-body">
      <app-generic-form
        [needData]="modalInfo.needData"
        [endpoint]="modalInfo.endpoint"
        [data]="modalInfo.data"
        [edit]="modalInfo.edit"
        (event)="evaluateEvent($event, modal.close)"
      >
        <div class="d-flex">
          <button class="btn btn-shadow btn-primary button-save ml-lg-auto">
            Save
          </button>
        </div>
      </app-generic-form>
    </div>

    <ng-container *ngIf="modalInfo.evaluate">
      <div class="modal-body text-center">
        <ng-container *ngIf="modalInfo.label.picture">
          <img
            [src]="modalInfo.label.picture"
            alt="Photo"
            style="border-radius: 50%"
            height="100"
            width="100"
          />
        </ng-container>

        <ng-container *ngIf="!modalInfo.label.picture">
          <span class="contact-avatar contact-avatar-lg">{{
            modalInfo.label.contactAvatar
          }}</span>
        </ng-container>

        <p class="evaluate-label">{{ modalInfo.label.name }}</p>
        <hr width="100" />

        <ngb-rating
          max="5"
          min="1"
          [(ngModel)]="modalInfo.data.evaluation_score"
        >
          <ng-template let-fill="fill" let-index="index">
            <span *ngIf="fill === 100" class="star star-lg full">&#9733;</span>
            <span *ngIf="fill === 0" class="star star-lg">
              {{ modalInfo.data.evaluation_score ? '&#9733;' : '&#9734;' }}
            </span>
          </ng-template>
        </ngb-rating>
      </div>
      <div class="modal-footer justify-content-center">
        <button
          type="button"
          class="btn btn-shadow btn-primary button-save"
          (click)="sendEvaluateData(modalInfo.endpoint, modalInfo.data)"
        >
          Save
          <app-spinner *ngIf="saveProcess"></app-spinner>
        </button>
      </div>
    </ng-container>
  </div>
</ng-template>

<ng-template #approveSignature let-modal>
  <div class="approve-signature-modal modal-content-wrapper">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <img
          alt="Photo"
          width="54"
          height="54"
          *ngIf="modalInfo.label.picture"
          [src]="modalInfo.label.picture"
        />
        <h2 class="modal-title d-flex align-items-center">
          <div class="mr-3">
            <span
              class="contact-avatar avatar"
              *ngIf="!modalInfo.label.picture"
            >
              {{ modalInfo.label.contactAvatar }}
            </span>
          </div>
          <div class="d-flex justify-content-center flex-column">
            Approve timesheet <br />
            <span class="secondary-title">for {{ modalInfo.label.name }}</span>
          </div>
        </h2>

        <app-close-button
          class="close-button ml-auto"
          (click)="modal.dismiss()"
        ></app-close-button>
      </div>
    </div>

    <div class="modal-body pt-0">
      <div
        [class.steps]="
          (modalInfo.changeEndpoint && identifyDevice()) ||
          (landscape() && !modalInfo.approve)
        "
        [class.signature-step]="modalInfo.signatureStep"
      >
        <div class="content-info">
          <div *ngIf="modalInfo.timesheet" class="flex-fill">
            <div class="desktop-version">
              <h3 class="group-title hide-sm">Times</h3>

              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: { label: 'Date', value: modalInfo.timesheet.date }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Start',
                    value: modalInfo.timesheet.started_at,
                    muted: true
                  }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Break',
                    value: modalInfo.timesheet.break,
                    muted: true
                  }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'End',
                    value: modalInfo.timesheet.ended_at,
                    muted: true
                  }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Total time',
                    value: modalInfo.timesheet.total,
                    totalTime: true
                  }
                "
              ></ng-container>
            </div>

            <div class="mobile-version">
              <div class="date">
                {{
                  modalInfo.timesheet.unformated_date
                    | dateFormat: 'DD MMM YYYY'
                }}
              </div>

              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Shift start/end',
                    value: modalInfo.timesheet.shift_start_end,
                    muted: true
                  }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Break start/end',
                    value: modalInfo.timesheet.break_start_and,
                    muted: true
                  }
                "
              ></ng-container>
              <ng-container
                *ngTemplateOutlet="
                  line;
                  context: {
                    label: 'Total time',
                    value: modalInfo.timesheet.total,
                    totalTime: true
                  }
                "
              ></ng-container>
            </div>
          </div>

          <div [hidden]="!modalInfo.timesheetData" class="form-wrapper">
            <h3
              class="group-title times"
              [class.change-form]="modalInfo.changeEndpoint"
            >
              Times
            </h3>

            <app-generic-form
              [needData]="false"
              [form]="modalInfo.form"
              [endpoint]="modalInfo.changeEndpoint"
              [metadataQuery]="modalInfo.metadataQuery"
              [changeMetadata]="modalInfo.changeMetadata"
              [data]="modalInfo.timesheetData"
              [edit]="modalInfo.edit"
              (event)="evaluateEvent($event, modal.close)"
            >
              <button #sendFormButton type="submit" [hidden]="true"></button>
            </app-generic-form>
          </div>

          <ng-template
            #line
            let-label="label"
            let-value="value"
            let-total="totalTime"
            let-muted="muted"
          >
            <div
              class="time-line d-flex align-items-center flex-wrap"
              [class.text-success]="total"
            >
              <span class="label" [class.description]="muted">{{ label }}:</span
              >&nbsp;
              <span>{{ value }}</span>
            </div>
          </ng-template>

          <div
            class="flex-fill evaluation-content"
            [class.evaluated]="modalInfo.evaluated"
          >
            <h3 class="group-title">Evaluation</h3>

            <div
              class="evaluation-wrapper d-flex align-items-center text-warning"
            >
              <div
                class="rating d-inline-flex"
                [class.filled]="modalInfo.data.evaluation_score"
              >
                <ngb-rating
                  min="1"
                  max="5"
                  [(ngModel)]="modalInfo.data.evaluation_score"
                  [rate]="modalInfo.data.evaluation_score"
                  [readonly]="modalInfo.evaluated"
                  (hover)="hovered = $event"
                  (leave)="hovered = undefined"
                  (rateChange)="hovered = undefined"
                >
                  <ng-template let-fill="fill" let-index="index">
                    <span *ngIf="fill === 100" class="star star-lg full"
                      >&#9733;</span
                    >
                    <span *ngIf="fill === 0" class="star star-lg">{{
                      modalInfo.data.evaluation_score ? '&#9733;' : '&#9734;'
                    }}</span>
                  </ng-template>
                </ngb-rating>
              </div>
              &nbsp;{{ modalInfo.data.evaluation_score }}
            </div>
          </div>
        </div>

        <div
          class="d-flex justify-content-center align-items-center flex-column"
        >
          <div [hidden]="!modalInfo.signature" class="signature-content">
            <app-back-link
              *ngIf="
                (modalInfo.changeEndpoint && identifyDevice()) ||
                (landscape() && !modalInfo.approve)
              "
              label="Back to times"
              (backEvent)="modalInfo.signatureStep = false"
            >
            </app-back-link>

            <h3
              class="group-title signature-title d-flex align-items-center w-100"
            >
              Signature
              <button
                *ngIf="modalInfo.signature"
                type="button"
                class="btn btn-link text-danger ml-auto pr-0 py-0 only-mobile"
                (click)="signatureCanvas.clear()"
              >
                Clear area
              </button>
            </h3>
            <app-signature
              #signatureCanvas
              [supervisorSignature]="modalInfo.supervisor_signature"
              (signature)="updateSignature($event)"
            ></app-signature>
          </div>
        </div>
      </div>

      <div
        class="modal-footer"
        [class.signature-step-footer]="modalInfo.signature"
      >
        <button
          *ngIf="modalInfo.signature"
          type="button"
          class="btn clear-button"
          [class.signature-step]="modalInfo.signatureStep"
          (click)="signatureCanvas.clear()"
        >
          Clear
        </button>
        <button
          type="button"
          class="btn btn-shadow btn-success"
          *ngIf="
            (modalInfo.changeEndpoint && identifyDevice()) || landscape()
              ? modalInfo.signatureStep
              : true
          "
          (click)="sendSignature(sendFormButton)"
        >
          Approve
          <app-spinner *ngIf="saveProcess"></app-spinner>
        </button>

        <button
          type="button"
          class="btn btn-shadow btn-primary next-button"
          *ngIf="
            (modalInfo.changeEndpoint && identifyDevice()) || landscape()
              ? !modalInfo.signatureStep
              : false
          "
          (click)="modalInfo.signatureStep = true"
        >
          Next
          <svg
            class="ml-1"
            width="16"
            height="11"
            viewBox="0 0 16 11"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.1816 10.5377C11.0345 10.5377 10.8138 10.5377 10.7402 10.3906C10.5195 10.1699 10.5195 9.80213 10.7402 9.58144L14.639 5.68265C14.8597 5.46196 14.8597 5.09415 14.639 4.87346L10.7402 0.974695C10.5195 0.754009 10.5195 0.386195 10.7402 0.16551C10.9609 -0.0551759 11.3287 -0.0551759 11.5494 0.16551L15.4482 4.0643C16.1838 4.79992 16.1838 5.82978 15.4482 6.5654L11.5494 10.4642C11.5494 10.5377 11.4023 10.5377 11.1816 10.5377Z"
              fill="white"
            />
            <path
              d="M14.7124 5.82983H0.588497C0.220688 5.82983 0 5.60913 0 5.24132C0 4.87351 0.220688 4.65283 0.588497 4.65283H14.7124C15.0802 4.65283 15.3009 4.87351 15.3009 5.24132C15.3009 5.60913 15.0802 5.82983 14.7124 5.82983Z"
              fill="white"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #confirmProfileModal let-modal>
  <div class="modal-content-wrapper">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <app-close-button
          class="close-button ml-auto"
          (click)="modal.dismiss()"
        ></app-close-button>
      </div>
    </div>
    <div class="modal-body">
      <p style="text-indent: 12px;">
        Your will buy profile of this candidate on your own risk! R3sourcer will
        not take any responsibility on accuracy of this profile and actual
        availability of this candidate! Your saved CC will be charged
        <strong>{{ modalInfo.amount }}</strong
        >. Please confirm you understand this!
      </p>
    </div>
    <div class="modal-footer justify-content-center py-2">
      <button
        type="button"
        class="btn big-btn btn-shadow btn-primary button-save"
        (click)="confirmCandidateBuy()"
      >
        Confirm
        <app-spinner *ngIf="saveProcess"></app-spinner>
      </button>
    </div>
  </div>
</ng-template>

<ng-template #sendMessageModal let-modal>
  <div class="modal-content-wrapper">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <h5 class="modal-title">Send message</h5>
        <app-close-button
          class="close-button ml-auto"
          (click)="modal.dismiss()"
        ></app-close-button>
      </div>
    </div>
    <div class="modal-body p-0">
      <iframe
        class="send-sms"
        [src]="modalInfo.url"
        frameborder="0"
        sandbox="allow-forms allow-scripts allow-same-origin allow-modals"
      ></iframe>
      <br />
    </div>
  </div>
</ng-template>

<ng-template #pdfDocumentModal let-modal>
  <app-close-button
    class="close-button ml-auto mt-3 mr-3"
    (click)="modal.close()"
  ></app-close-button>
  <div class="modal-body">
    <object
      type="application/pdf"
      [data]="modalInfo.url"
      style="width: 100%; height: 80vh"
    ></object>
  </div>
</ng-template>

<ng-template #fillInMap let-modal>
  <app-close-button
    class="close-button"
    (click)="modal.close()"
  ></app-close-button>
  <agm-map
    [latitude]="modalInfo.latitude"
    [longitude]="modalInfo.longitude"
    [zoom]="13"
    [mapTypeControl]="true"
  >
    <agm-marker
      [iconUrl]="marker.iconUrl"
      *ngFor="let marker of modalInfo.markers"
      [latitude]="marker.latitude"
      [longitude]="marker.longitude"
    >
      <agm-info-window>
        <strong>{{ marker.name }}</strong>
        <br />
        <p>{{ marker.description }}</p>
        <button
          *ngIf="!marker.label"
          type="button"
          class="btn btn-sm btn-success"
          (click)="markerClick(marker)"
          style="font-size: 10px;"
        >
          {{ marker.selected ? 'Selected' : 'Select' }}
        </button>
      </agm-info-window>
    </agm-marker>
  </agm-map>
</ng-template>

<ng-template #mapModal let-modal>
  <app-close-button
    class="close-button"
    (click)="modal.close()"
  ></app-close-button>
  <agm-map
    [latitude]="modalInfo.latitude"
    [longitude]="modalInfo.longitude"
    [zoom]="13"
    [mapTypeControl]="true"
  >
    <agm-marker
      [latitude]="modalInfo.latitude"
      [longitude]="modalInfo.longitude"
    ></agm-marker>
  </agm-map>
</ng-template>

<ng-template #history let-data="data" let-status="status">
  <div class="header">
    <div class="d-flex justify-content-center flex-column">
      <ng-container
        *ngFor="let field of getElement('position', data.content).content"
        appListElement
        [config]="field"
        [length]="getElement('position', data.content).content.length"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="d-flex align-items-center">
      <ng-container
        *ngFor="
          let field of getElement(
            'job_offer.candidate_contact.contact.picture',
            data.content
          ).content
        "
        appListElement
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
  <div class="body">
    <ng-container
      *ngFor="let field of getElement('times', data.content).content"
      appListElement
      [length]="getElement('times', data.content).content.length"
      [config]="field"
      (event)="eventHandler($event)"
      (buttonAction)="buttonHandler($event)"
    >
    </ng-container>
    <div class="mb-3 total-time-wrapper">
      <span
        class="text-success mr-1"
        style="display: inline-block; font-size: 15px; width: 50%"
        >Total time:&nbsp;</span
      >
      <ng-container
        *ngFor="let field of getElement('totalTime', data.content).content"
        appListElement
        [length]="getElement('totalTime', data.content).content.length"
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="d-flex align-items-center mb-2">
      <ng-container
        *ngFor="let field of getElement('tracking', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <span class="label">Evaluation:</span>
    <div class="d-inline-block">
      <ng-container
        *ngFor="let field of getElement('evaluate', data.content).content"
        appListElement
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>

  <div
    class="footer position-relative"
    [class.footer-container]="status && status.content[0].value !== 5"
  >
    <div
      class="d-flex justify-content-center flex-column"
      *ngIf="status && status.content[0].value !== 5"
    >
      <ng-container
        *ngFor="
          let field of getElement('status', data.content).content;
          let last = last
        "
      >
        <ng-container
          *ngIf="!isInteger(field.value)"
          appListElement
          [last]="last"
          [config]="field"
          (event)="eventHandler($event)"
          (buttonAction)="buttonHandler($event)"
        >
        </ng-container>
      </ng-container>
    </div>

    <div class="button-wrapper" *ngIf="status && status.content[0].value === 5">
      <ng-container
        *ngFor="let field of getElement('approve', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="button-wrapper" *ngIf="status && status.content[0].value === 5">
      <ng-container
        *ngFor="let field of getElement('change', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
</ng-template>

<ng-template #timesheetsCandidate let-data="data" let-status="status">
  <div class="header">
    <div class="d-flex justify-content-center flex-column">
      <ng-container
        *ngFor="let field of getElement('jobsite', data.content).content"
        appListElement
        [config]="field"
        [length]="getElement('jobsite', data.content).content.length"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
  <div class="body">
    <ng-container
      *ngFor="let field of getElement('mobileTimes', data.content).content"
      appListElement
      [length]="getElement('mobileTimes', data.content).content.length"
      [config]="field"
      (event)="eventHandler($event)"
      (buttonAction)="buttonHandler($event)"
    >
    </ng-container>
    <div class="mb-3 d-flex">
      <span
        class="text-success mr-1"
        style="display: inline-block; font-size: 15px; width: 50%"
        >Total time:&nbsp;</span
      >
      <ng-container
        *ngFor="let field of getElement('totalTime', data.content).content"
        appListElement
        [length]="getElement('totalTime', data.content).content.length"
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="d-flex align-items-center mb-2">
      <ng-container
        *ngFor="let field of getElement('tracking', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>

  <div class="footer position-relative" [class.footer-container]="status">
    <div
      class="d-flex"
      *ngIf="status"
      [ngClass]="{
        'align-items-center flex-wrap justify-content-between w-100':
          status.content[0].value !== 7,
        'flex-column justify-content-center': status.content[0].value === 7,
        'no-signature':
          !status.content[status.content.length - 1].value.origin &&
          status.content[0].value === 7
      }"
    >
      <ng-container
        *ngFor="
          let field of getElement('status', data.content).content;
          let last = last
        "
      >
        <ng-container
          appListElement
          [last]="last"
          [config]="field"
          (event)="eventHandler($event)"
          (buttonAction)="buttonHandler($event)"
        >
        </ng-container>
      </ng-container>
    </div>
  </div>
</ng-template>

<ng-template #unapproved let-data="data">
  <div class="header">
    <div class="d-flex justify-content-center flex-column">
      <ng-container
        *ngFor="let field of getElement('position', data.content).content"
        appListElement
        [config]="field"
        [length]="getElement('position', data.content).content.length"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="d-flex align-items-center">
      <ng-container
        *ngFor="
          let field of getElement(
            'job_offer.candidate_contact.contact.picture',
            data.content
          ).content
        "
        appListElement
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
  <div class="body">
    <label>Times</label>
    <ng-container
      *ngFor="let field of getElement('times', data.content).content"
      appListElement
      [length]="getElement('times', data.content).content.length"
      [config]="field"
      (event)="eventHandler($event)"
      (buttonAction)="buttonHandler($event)"
    >
    </ng-container>
    <div class="mb-3 total-time-wrapper">
      <span
        class="text-success mr-1"
        style="display: inline-block; font-size: 15px; width: 50%"
        >Total time:&nbsp;</span
      >
      <ng-container
        *ngFor="let field of getElement('totalTime', data.content).content"
        appListElement
        [length]="getElement('totalTime', data.content).content.length"
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="d-flex align-items-center mb-2">
      <ng-container
        *ngFor="let field of getElement('tracking', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <span class="label">Evaluation:</span>
    <div class="d-inline-block">
      <ng-container
        *ngFor="let field of getElement('evaluate', data.content).content"
        appListElement
        [config]="field"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
  <div class="footer">
    <div class="button-wrapper">
      <ng-container
        *ngFor="
          let field of getElement('approve', data.content).content.slice(0, 1)
        "
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
    <div class="button-wrapper">
      <ng-container
        *ngFor="let field of getElement('change', data.content).content"
        appListElement
        [config]="inverseButton(field)"
        (event)="eventHandler($event)"
        (buttonAction)="buttonHandler($event)"
      >
      </ng-container>
    </div>
  </div>
</ng-template>
