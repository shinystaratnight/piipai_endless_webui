<div *ngIf="config" class="form-builder-form">
  <section class="form">
    <div class="p-3 d-flex align-items-center justify-content-end">
      <app-language-selector></app-language-selector>
    </div>

    <header class="form__header" *ngIf="steps.length > 1">
      <span class="form__steps">{{'registration.step' | translate}} {{ currentStep + 1 }} {{'registration.of' | translate}} {{ steps.length }}</span>
      <h3 class="form__name">{{ steps[currentStep].title | translate }}</h3>
    </header>

    <div class="content">
      <app-dynamic-form
        [formBuilder]="true"
        [config]="steps[currentStep].metadata"
        [form]="form"
        [errors]="error"
        [formId]="formId"
        [hiddenFields]="hiddenFields"
        [hidden]="process"
        (event)="eventHandler($event)"
      >
      </app-dynamic-form>

      <div class="text-center" *ngIf="process">
        <app-loader></app-loader>
      </div>
    </div>

    <footer class="form__footer" *ngIf="!process" [class.justify-content-center]="steps.length === 1">
      <button
        type="button"
        class="form__button btn btn-default"
        (click)="back()"
      >
        {{'back' | translate}}
      </button>

      <div class="button-wrapper d-flex flex-column align-items-center" *ngIf="currentStep + 1 !== steps.length">
        <button
          type="button"
          class="form__button btn btn-primary w-100"
          [disabled]="disableNextButton || formInvalid"
          (click)="next()"
        >
          {{ 'next' | translate }}
        </button>
        <span class="error-message" *ngIf="formInvalid">
          {{'registration.fill_error' | translate}}
        </span>
      </div>

      <div class="button-wrapper d-flex flex-column align-items-center" *ngIf="currentStep + 1 === steps.length">
        <button
          type="submit"
          class="form__button btn btn-primary w-100"
          [disabled]="form.invalid || saveProcess"
          (click)="submitForm()"
        >
          {{'registration.register' | translate}}
          <app-spinner *ngIf="saveProcess"></app-spinner>
        </button>
        <span class="error-message" *ngIf="form.invalid">{{'registration.fill_error' | translate}}</span>
      </div>
    </footer>
  </section>
</div>

<!-- <app-toast></app-toast> -->
