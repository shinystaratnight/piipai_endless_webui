<div class="form-tabs">
  <ngb-tabset [activeId]="config.activeId">
    <ng-container *ngFor="let field of config.children; let i = index">
      <ngb-tab
        [id]="'ngb-tab-' + i"
        *ngIf="!field.hide && (!config.editForm ? field.main : true)"
        title="
          {{
          getTranslateKey(field.translateKey, 'name')
            | translate
              : {
                  Default:
                    field.name ||
                    (field.templateOptions && field.templateOptions.label)
                }
        }}
        "
      >
        <ng-template ngbTabContent>
          <div
            class="label"
            *ngIf="field.main && !isMobileDevice && !config.notEdit"
          >
            {{
              getTranslateKey(field.translateKey, 'label')
                | translate: { Default: field.label }
            }}
            <button
              type="button"
              class="btn edit-mode"
              webuiSubscriptionRequired
              *ngIf="canUpdate && mode === 'view' && !hideEditButton()"
              (click)="changeMode('edit')"
            >
              <fa-icon icon="pencil-alt"></fa-icon>
              {{ 'edit_mode' | translate: { Default: 'Edit mode' } }}
            </button>

            <button
              type="button"
              class="btn close-btn"
              webuiSubscriptionRequired
              *ngIf="mode === 'edit'"
              (click)="changeMode('view')"
            >
              {{
                'close_without_save'
                  | translate: { Default: 'Close without save' }
              }}
            </button>

            <button
              type="submit"
              class="btn btn-primary btn-shadow save"
              webuiSubscriptionRequired
              [class.ml-auto]="mode !== 'edit'"
              *ngIf="mode === 'edit' || !config.editForm"
              [disabled]="form && form.disableSaveButton"
            >
              {{
                mode !== 'edit'
                  ? ('save' | translate: { Default: 'Save' })
                  : ('save_changes' | translate: { Default: 'Save changes' })
              }}
              <webui-spinner *ngIf="saving"></webui-spinner>
            </button>
          </div>

          <ng-container
            appFormElement
            [config]="field"
            [group]="group"
            [errors]="errors"
            [message]="message"
            (event)="eventHandler($event)"
            (buttonAction)="buttonActionHandler($event)"
          >
          </ng-container>
        </ng-template>
      </ngb-tab>
    </ng-container>
  </ngb-tabset>
</div>
