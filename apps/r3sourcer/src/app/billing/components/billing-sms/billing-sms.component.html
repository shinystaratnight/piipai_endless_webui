<div class="group">
  <div class="group__content">
    <h5 class="group__label">Sms credit details</h5>

    <ng-container *ngIf="smsBalance">
      <div class="field">
        <label class="field__label">Charge rate for SMS:</label>
        <span>
          {{ smsBalance.segment_cost | currency: currency }} per segment (160
          signs)
        </span>
      </div>

      <div class="field">
        <label class="field__label">Auto top-up:</label>
        <div>
          <div class="switch">
            <span class="on" [class.active]="smsBalance.auto_charge">on</span>
            /
            <span class="off" [class.active]="!smsBalance.auto_charge">
              off
            </span>
          </div>
          <a href="#" (click)="autoCharge($event)">Configure Auto-charge</a>
        </div>
      </div>
    </ng-container>
  </div>

  <ng-container *ngIf="smsBalance">
    <div class="field group__footer">
      <label class="field__label">Current balance:</label>
      <div
        class="d-flex align-items-center justify-content-between flex-grow-1"
      >
        <span class="balance">
          {{ smsBalance.balance | currency: currency }}
        </span>
        <button
          type="button"
          class="btn btn-primary"
          (click)="showAddFundsForm()"
          [disabled]="!cardExist"
        >
          Add Funds
        </button>
      </div>
    </div>
  </ng-container>

  <ng-template #charge let-c="close" let-d="dismiss">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <h5 class="modal-title">Auto-charge</h5>

        <webui-close-button class="ms-auto" (click)="d()"></webui-close-button>
      </div>
    </div>

    <div class="modal-body">
      <webui-dynamic-form [config]="modalConfig" [form]="group">
        <div class="text-center">
          <button
            type="submit"
            class="btn big-btn btn-shadow bg-primary text-white button-save mt-3"
            (click)="saveAutoCharge()"
          >
            {{ 'save' | translate: { Default: 'Save' } }}
          </button>
        </div>
      </webui-dynamic-form>
    </div>
  </ng-template>

  <ng-template #funds let-c="close" let-d="dismiss">
    <div class="modal-header-wrapper">
      <div class="modal-header">
        <h5 class="modal-title">Add funds</h5>

        <webui-close-button class="ms-auto" (click)="d()"></webui-close-button>
      </div>
    </div>

    <div class="modal-body text-center">
      <h6>Confirming, I want my saved Credit Card to be charged</h6>

      <div class="d-flex align-items-center justify-content-center">
        <div class="form-element">
          <input
            class="form-control form-element-content"
            type="number"
            name="employees"
            min="20"
            style="width: 70px"
            [(ngModel)]="amount"
          />
        </div>
        <small class="description">
          (minimum {{ 20 | currency: currency }})
        </small>
      </div>

      <h6 class="mt-2">so we could use SMS service!</h6>

      <button
        type="submit"
        class="btn big-btn btn-shadow bg-primary text-white button-save mt-3"
        (click)="addFunds()"
      >
        Approve
      </button>
    </div>
  </ng-template>
</div>
