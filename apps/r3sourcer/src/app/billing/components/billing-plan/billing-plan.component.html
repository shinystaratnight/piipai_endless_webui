<div class="subcription-details ">
  <h5 class="mb-0 me-1">Subscription details</h5>

  <button type="button"
  class="btn btn-sm btn-primary action-button"
  [disabled]="!cardExist">Save Card</button>
</div>

<button type="button" class="btn btn-primary subscribe-button"
  *ngIf="!currentPlan"
  [disabled]="!cardExist"
  (click)="setPlan()">
    Subscribe
</button>

<ng-template #subscription let-c="close" let-d="dismiss">
  <div class="modal-header-wrapper">
    <div class="modal-header">
      <h5 class="modal-title">Select your plan</h5>

      <webui-close-button class="ms-auto" (click)="d()"></webui-close-button>
    </div>
  </div>

  <div class="modal-body">
    <form>
      <div class="form-element">
        <label for="employees">
          Employees count:
        </label>
        <input class="form-control form-element-content" size="5" type="number" name="employees" id="employees" min="1" max="1005"
          [ngModel]="workerCount"
          (ngModelChange)="workerCount = $event > 1006 ? 1005 : $event < 1 ? 1 : $event">
      </div>
    </form>

    <div class="plan-info">
      <div *ngFor="let plan of plans" [class.active]="checkActivePlan(plan)" class="plan-item" (click)="selectPlan(plan)">
        <div class="plan-name">
          <h4 class="mb-2 pt-3">{{plan.heading}}
            <small *ngIf="plan.discount_comment">
              {{plan.discount_comment}}
              {{plan.percentage_discount ? plan.percentage_discount + '%' : ''}}
            </small>
          </h4>
          <p>{{plan.heading_tag_line}}</p>
        </div>
        <div class="plan-detail">
          <h4 class="mb-1">{{planPay(plan) | currency : currency}}</h4>
          <p class="mb-2">{{plan.amount_tag_line}}</p>
          <p class="annually"><small>({{planPayYear(plan) | currency : currency}} annually)</small></p>
          <ul class="features" *ngIf="plan.table">
            <ng-container *ngFor="let item of plan.table">
              <li class="features__item" *ngIf="item">
                <fa-icon icon="check" class="features__icon"></fa-icon>
                {{item}}
              </li>
            </ng-container>
          </ul>

          <p *ngIf="plan.amount_comment" class="pay mt-auto">{{plan.amount_comment}}</p>
        </div>
      </div>
    </div>

    <p *ngIf="workerCount > 1000" class="message">Please contact our sales staff for customized offer: <a href="mailto:sales@r3sourcer.com">sales@r3sourcer.com</a></p>

    <div class="spinner-wrapper" *ngIf="saveProcess">
      Saving... <webui-spinner></webui-spinner>
    </div>
  </div>
</ng-template>
